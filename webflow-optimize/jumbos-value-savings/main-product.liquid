<section id="MainProduct-{{ section.id }}" class="page-width section-{{ section.id }}-padding" data-section="{{ section.id }}">
  {%- if product.selling_plan_groups.size > 0 -%}
    {%- assign canShowRecharge = true -%}
  {%- else -%}
    {%- assign canShowRecharge = false -%}
  {%- endif -%}

  {%- unless template.suffix == blank -%}
    {%- assign canShowRecharge = false -%}
  {%- endunless -%}


  {%- if canShowRecharge -%}
    <script src="{{ 'recharge.js' | asset_url }}" async></script>
  {%- endif -%}
  <script src="{{ 'custom-atc-handling.js' | asset_url }}" defer="defer"></script>
    {{ 'section-main-product.css' | asset_url | stylesheet_tag }}
    {{ 'component-accordion.css' | asset_url | stylesheet_tag }}
    {{ 'component-price.css' | asset_url | stylesheet_tag }}
    {{ 'component-rte.css' | asset_url | stylesheet_tag }}
    {{ 'component-slider.css' | asset_url | stylesheet_tag }}
    {{ 'component-rating.css' | asset_url | stylesheet_tag }}
    {{ 'component-loading-overlay.css' | asset_url | stylesheet_tag }}
    {{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}
    {{ 'custom-pdp.css' | asset_url | stylesheet_tag }}
    {{ 'recharge.css' | asset_url | stylesheet_tag }}
    {{ 'custom-pdp-anti-flicker.css' | asset_url | stylesheet_tag }}
    {{ 'klaviyo_subscribe.css' | asset_url | stylesheet_tag }}

    {%- style -%}
      .section-{{ section.id }}-padding {
        padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
        padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
      }
    {% if product.selected_or_first_available_variant.available == false  %}
      .event-message {
        display: none;    
      }

      .rc-widget, .product__text[data-intellimize-id] {
        display: none;    
      }
      
    {% endif %}
    {% if product.metafields.accentuate.hide_recharge_variant %}
      .rc-widget, .product__text[data-intellimize-id] {
        display: none;    
      }
      
      {% endif %}
      {%- if canShowRecharge == false or product.id == 5710548271256 -%}
   .product__text{
     display:none;
   }
  {%- endif -%}
    
  {% if product.metafields.accentuate.hide_skeeper_container %}
    .skeeper_container {
      display: none;    
    }
  {% endif %}
           div.product__title > h1 {
        font-size: 24px;
        color: #5B6670;
        letter-spacing: -0.72px;
        font-weight: 700;
        line-height: 38px;
        }

        .pdp_benefits{
        color:#5B6670;
        line-height: 32px;
        }
      .rte li{
        color: #5B6670;
      }
      @media screen and (min-width: 750px) {
        .section-{{ section.id }}-padding {
          padding-top: {{ section.settings.padding_top }}px;
          padding-bottom: {{ section.settings.padding_bottom }}px;
        }
        .parent-container{
                position:static !important;
            }
               div.product__title > h1 {
        font-size: 22px;
        line-height: 38px;
        }
        .pdp_benefits{
        font-size:16px;
        }
          h5.headline{
          font-size:16px;
          }
   
      }

      @media screen and (min-width: 990px) {
        

        .product--large:not(.product--no-media) .product__info-wrapper {
            padding-left: 4rem;
            max-width: 45%;
            width: calc(45% - var(--grid-desktop-horizontal-spacing) / 2);
        }
        .product--large:not(.product--no-media) .product__media-wrapper {
            padding-left: 4rem;
            max-width: 55%;
            width: calc(55% - var(--grid-desktop-horizontal-spacing) / 2);
        }
      }
@media screen and (min-width: 1200px) {
        div.product__title > h1 {
          font-size: 30px;
          line-height: 44px;
        }
        .pdp_benefits{
          font-size:24px;
          line-height:38px;
        }
        .product__title{
          gap:8px;
        } 
      }
       #product-info{
        color: #5B6670;
        font-size: 16px;
        font-style: normal;
        font-weight: 300;
        line-height: 24px;
        margin: 24px 0 !important;
       }
        h5.headline{
          font-size:18px;
          margin:0px;
          line-height:30px;
          font-weight:700;
          color: #5B6670;
          text-transform:lowercase;
        }
        h3.price-item{
          font-size:18px !important;
        }
      
      .precleanse_promo{
        display:none;
      }

      .global-media-settings.precleanse_promo{
       display:none !important; 
      }
      variant-radios.no-js-hidden {
        margin-bottom: 0px !important;
      }
      fieldset:first-of-type {
        margin-bottom: 0px !important;
      }
      label[for="rc-radio1"] {
        margin-top: 0px !important;
      }   
      .global-media-settings.precleanse_promo{
       display:none !important; 
      }
      
      .glightbox-container{
        background: white;
      }
 
      .glightbox-clean .gclose svg,  .gclose svg, .gnext svg, .gprev svg {
          width: 14px;
      }
      
      .glightbox-clean .gslide-media {
        -webkit-box-shadow: none;
        box-shadow: none;
      }
      .glightbox-clean .gclose path, .glightbox-clean .gnext path, .glightbox-clean .gprev path{
        fill: rgba(var(--color-foreground),.55);
      }

      .glightbox-clean .gclose, .glightbox-clean .gnext, .glightbox-clean .gprev {
          width: 4rem;
          height: 4rem;
          border-radius: 50%;
          background-color: rgb(var(--color-background));
          border: 0.1rem solid rgba(var(--color-foreground),.1);
          border-radius: 50%;
          color: rgba(var(--color-foreground),.55);
          opacity: .7;
      }

      .glightbox-clean .gclose:hover, .glightbox-clean .gnext:hover, .glightbox-clean .gprev:hover{
        background: transparent;
        opacity: 1;
      }

      .glightbox img  {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
      }
      .icon-play__custom{
        background-color: rgb(var(--color-background));
        border: 0.1rem solid rgba(var(--color-foreground),.1);
        border-radius: 50%;
        color: rgb(var(--color-foreground));
        display: flex;
        align-items: center;
        justify-content: center;
        height: 6.2rem;
        width: 6.2rem;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%) scale(1);
        transition: transform var(--duration-short) ease,color var(--duration-short) ease;
        z-index: 1;
      }

      .icon-play__custom svg{
        width: 2rem;
        height: 2rem;
        margin-left: 0.2rem;
      }

      .icon-play__custom:hover {
          transform: translate(-50%,-50%) scale(1.1);
      }
    {%- endstyle -%}

    <script async src="https://sc.ls.skeepers.io/shoppable.umd.js"></script>
    <script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

    {%- assign first_3d_model = product.media | where: "media_type", "model" | first -%}
    {%- if first_3d_model -%}
      {{ 'component-product-model.css' | asset_url | stylesheet_tag }}
      <link id="ModelViewerStyle" rel="stylesheet" href="https://cdn.shopify.com/shopifycloud/model-viewer-ui/assets/v1.0/model-viewer-ui.css" media="print" onload="this.media='all'">
      <link id="ModelViewerOverride" rel="stylesheet" href="{{ 'component-model-viewer-ui.css' | asset_url }}" media="print" onload="this.media='all'">
    {%- endif -%}

    {% include 'breadcrumb' %}

     <div class="product product--{{ section.settings.media_size }} product--{{ section.settings.gallery_layout }} grid grid--1-col {% if product.media.size > 0 %}grid--2-col-tablet{% else %}product--no-media{% endif %} {% if product.type == 'free gift' %}product__free-gift{% endif %} {% if product.gift_card or product.type == 'Gift Cards' %}product__giftcard{% endif %}">
      <div class="grid__item product__media-wrapper gallery-container">
        <media-gallery id="MediaGallery-{{ section.id }}" role="region" {% if section.settings.enable_sticky_info %}class="product__media-gallery"{% endif %} aria-label="{{ 'products.product.media.gallery_viewer' | t }}" data-desktop-layout="{{ section.settings.gallery_layout }}">
          <div id="GalleryStatus-{{ section.id }}" class="visually-hidden" role="status"></div>
          <slider-component id="GalleryViewer-{{ section.id }}" class="slider-mobile-gutter">
            <a class="skip-to-content-link button visually-hidden quick-add-hidden" href="#ProductInfo-{{ section.id }}">
              {{ "accessibility.skip_to_product_info" | t }}
            </a>
            <ul id="Slider-Gallery-{{ section.id }}" class="product__media-list contains-media grid grid--peek list-unstyled slider slider--mobile" role="list">
              {%- liquid
                assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src'
                assign media_count = product.media.size
                if section.settings.hide_variants and media_count > 1
                  assign media_count = media_count | minus: variant_images.size | plus: 1
                endif

                if section.settings.media_size == 'large'
                  assign media_width = 0.65
                elsif section.settings.media_size == 'medium'
                  assign media_width = 0.55
                elsif section.settings.media_size == 'small'
                  assign media_width = 0.45
                endif
              -%}
              {%- if product.selected_or_first_available_variant.featured_media != null -%}
                {%- assign featured_media = product.selected_or_first_available_variant.featured_media -%}
                <li id="Slide-{{ section.id }}-{{ featured_media.id }}" class="product__media-item grid__item slider__slide is-active{% if featured_media.media_type != 'image' %} product__media-item--full{% endif %}{% if section.settings.hide_variants and variant_images contains featured_media.src %} product__media-item--variant{% endif %}" data-media-id="{{ section.id }}-{{ featured_media.id }}">
                  {%- assign media_position = 1 -%}
                  {% render 'product-thumbnail-custom', media: featured_media, position: media_position, loop: section.settings.enable_video_looping, modal_id: section.id, xr_button: true, media_width: media_width, lazy_load: false %}
                  {% render 'card__pills', addon_product: product %}
                </li>
              {%- endif -%}
              {%- for media in product.media -%}
                {%- unless media.id == product.selected_or_first_available_variant.featured_media.id -%}
                  <li id="Slide-{{ section.id }}-{{ media.id }}" class="{% if media.id == 36206087897240 %}precleanse_promo {% endif %} product__media-item grid__item slider__slide{% if product.selected_or_first_available_variant.featured_media == null and forloop.index == 1 %} is-active{% endif %}{% if media.media_type != 'image' %} product__media-item--full{% endif %}{% if section.settings.hide_variants and variant_images contains media.src %} product__media-item--variant{% endif %}" data-media-id="{{ section.id }}-{{ media.id }}">
                    {%- liquid
                      assign media_position = media_position | default: 0 | plus: 1
                      assign lazy_load = false
                      if media_position > 3
                        assign lazy_load = true
                      endif
                      render 'product-thumbnail-custom', media: media, position: media_position, loop: section.settings.enable_video_looping, modal_id: section.id, xr_button: true, media_width: media_width, lazy_load: lazy_load
                    -%}
                  </li>
                {%- endunless -%}
              {%- endfor -%}
            </ul>
            <div class="slider-buttons no-js-hidden quick-add-hidden{% if media_count < 2 or section.settings.mobile_thumbnails == 'show' %} small-hide{% endif %}">
              <button type="button" class="slider-button slider-button--prev slider-button_pdp" name="previous" aria-label="{{ 'general.slider.previous_slide' | t }}">{% render 'icon-caret' %}</button>
              <div class="slider-counter caption">
                <span class="slider-counter--current">1</span>
                <span aria-hidden="true"> / </span>
                <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
                <span class="slider-counter--total">{{ media_count }}</span>
              </div>
              <button type="button" class="slider-button slider-button--next slider-button_pdp" name="next" aria-label="{{ 'general.slider.next_slide' | t }}">{% render 'icon-caret' %}</button>
            </div>
          </slider-component>
          {%- if first_3d_model -%}
            <button
              class="button button--full-width product__xr-button"
              type="button"
              aria-label="{{ 'products.product.xr_button_label' | t }}"
              data-shopify-xr
              data-shopify-model3d-id="{{ first_3d_model.id }}"
              data-shopify-title="{{ product.title | escape }}"
              data-shopify-xr-hidden
            >
              {% render 'icon-3d-model' %}
              {{ 'products.product.xr_button' | t }}
            </button>
          {%- endif -%}
          {%- if media_count > 1 and section.settings.gallery_layout != 'stacked' or section.settings.mobile_thumbnails == 'show' -%}
            <slider-component id="GalleryThumbnails-{{ section.id }}" class="thumbnail-slider slider-mobile-gutter quick-add-hidden{% if section.settings.mobile_thumbnails == 'hide' %} small-hide{% endif %}{% if media_count <= 3 %} thumbnail-slider--no-slide{% endif %}">
              <button type="button" class="slider-button slider-button--prev{% if media_count <= 3 %} small-hide{% endif %}{% if media_count <= 4 %} medium-hide large-up-hide{% endif %}" name="previous" aria-label="{{ 'general.slider.previous_slide' | t }}" aria-controls="GalleryThumbnails-{{ section.id }}" data-step="3">{% render 'icon-caret' %}</button>
              <ul id="Slider-Thumbnails-{{ section.id }}" class="thumbnail-list list-unstyled slider slider--mobile{% if section.settings.gallery_layout == 'thumbnail_slider' %} slider--tablet-up{% endif %}">
                {%- if featured_media != null -%}
                  {%- liquid
                    capture media_index
                      if featured_media.media_type == 'model'
                        increment model_index
                      elsif featured_media.media_type == 'video' or featured_media.media_type == 'external_video'
                        increment video_index
                      elsif featured_media.media_type == 'image'
                        increment image_index
                      endif
                    endcapture
                    assign media_index = media_index | plus: 1
                  -%}
                  <li id="Slide-Thumbnails-{{ section.id }}-0" class="thumbnail-list__item slider__slide{% if section.settings.hide_variants and variant_images contains featured_media.src %} thumbnail-list_item--variant{% endif %}" data-target="{{ section.id }}-{{ featured_media.id }}" data-media-position="{{ media_index }}">
                    <button class="thumbnail global-media-settings global-media-settings--no-shadow {% if featured_media.preview_image.aspect_ratio > 1 %}thumbnail--wide{% else %}thumbnail--narrow{% endif %}"
                      aria-label="{%- if featured_media.media_type == 'image' -%}{{ 'products.product.media.load_image' | t: index: media_index }}{%- elsif featured_media.media_type == 'model' -%}{{ 'products.product.media.load_model' | t: index: media_index }}{%- elsif featured_media.media_type == 'video' or featured_media.media_type == 'external_video' -%}{{ 'products.product.media.load_video' | t: index: media_index }}{%- endif -%}"
                      aria-current="true"
                      aria-controls="GalleryViewer-{{ section.id }}"
                      aria-describedby="Thumbnail-{{ section.id }}-0"
                    >
                      <img id="Thumbnail-{{ section.id }}-0" srcset="{% if featured_media.preview_image.width >= 54 %}{{ featured_media.preview_image | image_url: width: 54 }} 54w,{% endif %}
                        {% if featured_media.preview_image.width >= 74 %}{{ featured_media.preview_image | image_url: width: 74 }} 74w,{% endif %}
                        {% if featured_media.preview_image.width >= 104 %}{{ featured_media.preview_image | image_url: width: 104 }} 104w,{% endif %}
                        {% if featured_media.preview_image.width >= 162 %}{{ featured_media.preview_image | image_url: width: 162 }} 162w,{% endif %}
                        {% if featured_media.preview_image.width >= 208 %}{{ featured_media.preview_image | image_url: width: 208 }} 208w,{% endif %}
                        {% if featured_media.preview_image.width >= 324 %}{{ featured_media.preview_image | image_url: width: 324 }} 324w,{% endif %}
                        {% if featured_media.preview_image.width >= 416 %}{{ featured_media.preview_image | image_url: width: 416 }} 416w,{% endif %},
                        {{ featured_media.preview_image | image_url }} {{ media.preview_image.width }}w"
                        src="{{ featured_media | image_url: width: 416 }}"
                        sizes="(min-width: {{ settings.page_width }}px) calc(({{ settings.page_width | minus: 100 | times: media_width | round }} - 4rem) / 4), (min-width: 990px) calc(({{ media_width | times: 100 }}vw - 4rem) / 4), (min-width: 750px) calc((100vw - 15rem) / 8), calc((100vw - 14rem) / 3)"
                        alt="{{ featured_media.alt | escape }}"
                        height="208"
                        width="208"
                        loading="lazy"
                      >
                    </button>
                  </li>
                {%- endif -%}
                {%- for media in product.media -%}
                  {%- unless media.id == product.selected_or_first_available_variant.featured_media.id -%}
                    {%- liquid
                      capture media_index
                        if media.media_type == 'model'
                          increment model_index
                        elsif media.media_type == 'video' or media.media_type == 'external_video'
                          increment video_index
                        elsif media.media_type == 'image'
                          increment image_index
                        endif
                      endcapture
                      assign media_index = media_index | plus: 1
                    -%}
                     <li id="Slide-Thumbnails-{{ section.id }}-{{ forloop.index }}" class="thumbnail-list__item slider__slide{% if section.settings.hide_variants and variant_images contains media.src %} thumbnail-list_item--variant{% endif %}" data-target="{{ section.id }}-{{ media.id }}"  data-media-position="{{ media_index }}">
                      {%- if media.media_type == 'model' -%}
                        <span class="thumbnail__badge" aria-hidden="true">
                          {%- render 'icon-3d-model' -%}
                        </span>
                      {%- elsif media.media_type == 'video' or media.media_type == 'external_video' -%}
                        <span class="thumbnail__badge" aria-hidden="true">
                          {%- render 'icon-play' -%}
                        </span>
                      {%- endif -%}
                      <button class="thumbnail global-media-settings global-media-settings--no-shadow {% if media.preview_image.aspect_ratio > 1 %}thumbnail--wide{% else %}thumbnail--narrow{% endif %}"
                        aria-label="{%- if media.media_type == 'image' -%}{{ 'products.product.media.load_image' | t: index: media_index }}{%- elsif media.media_type == 'model' -%}{{ 'products.product.media.load_model' | t: index: media_index }}{%- elsif media.media_type == 'video' or media.media_type == 'external_video' -%}{{ 'products.product.media.load_video' | t: index: media_index }}{%- endif -%}"
                        {% if media == product.selected_or_first_available_variant.featured_media or product.selected_or_first_available_variant.featured_media == null and forloop.index == 1 %} aria-current="true"{% endif %}
                        aria-controls="GalleryViewer-{{ section.id }}"
                        aria-describedby="Thumbnail-{{ section.id }}-{{ forloop.index }}"
                      >
                        <img id="Thumbnail-{{ section.id }}-{{ forloop.index }}"
                          srcset="{% if media.preview_image.width >= 59 %}{{ media.preview_image | image_url: width: 59 }} 59w,{% endif %}
                                  {% if media.preview_image.width >= 118 %}{{ media.preview_image | image_url: width: 118 }} 118w,{% endif %}
                                  {% if media.preview_image.width >= 84 %}{{ media.preview_image | image_url: width: 84 }} 84w,{% endif %}
                                  {% if media.preview_image.width >= 168 %}{{ media.preview_image | image_url: width: 168 }} 168w,{% endif %}
                                  {% if media.preview_image.width >= 130 %}{{ media.preview_image | image_url: width: 130 }} 130w,{% endif %}
                                  {% if media.preview_image.width >= 260 %}{{ media.preview_image | image_url: width: 260 }} 260w{% endif %}"
                          src="{{ media | image_url: width: 84, height: 84 }}"
                          sizes="(min-width: 1200px) calc((1200px - 19.5rem) / 12), (min-width: 750px) calc((100vw - 16.5rem) / 8), calc((100vw - 8rem) / 5)"
                          alt="{{ media.alt | escape }}"
                          height="200"
                          width="200"
                          loading="lazy"
                        >
                      </button>
                    </li>
                  {%- endunless -%}
                {%- endfor -%}
              </ul>
              <button type="button" class="slider-button slider-button--next{% if media_count <= 3 %} small-hide{% endif %}{% if media_count <= 4 %} medium-hide large-up-hide{% endif %}" name="next" aria-label="{{ 'general.slider.next_slide' | t }}" aria-controls="GalleryThumbnails-{{ section.id }}" data-step="3">{% render 'icon-caret' %}</button>
            </slider-component>
          {%- endif -%}
        </media-gallery>
      </div>
      <div id="product-desktopAtc" class="product__info-wrapper grid__item{% if settings.page_width > 1400 and section.settings.media_size == "small" %} product__info-wrapper--extra-padding{% endif %}">
        <div id="ProductInfo-{{ section.id }}" class="product__info-container{% if section.settings.enable_sticky_info %} product__info-container--sticky{% endif %}">
          {%- assign product_form_id = 'product-form-' | append: section.id -%}

          {%- for block in section.blocks -%}
            {%- case block.type -%}
            {%- when '@app' -%}
              {% render block %}
            {%- when 'text' -%}
               {% if block.settings.h4heading %}<h4 {% else %} <p {% endif %} {% if block.settings.addUniqueID %}id="{{ block.settings.addUniqueID }}"{% endif %} class="product__text{% if block.settings.text_style == 'uppercase' %} caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %} subtitle{% endif %}" {% if block.settings.data-intellimize-id-textbox %}data-intellimize-id="intellimize-textbox"{% endif %} {{ block.shopify_attributes }}>
                {{- block.settings.text -}}
               {% if block.settings.h4heading %}</h4>{% else %}</p>{% endif %}
            {%- when 'richtext' -%}
                      <div {% if block.settings.addUniqueID %}id="{{ block.settings.addUniqueID }}"{% endif %}class="product__text{% if block.settings.text_style == 'uppercase' %} caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %} subtitle{% endif %}"{{ block.shopify_attributes }}>
                {{- block.settings.richtext -}}
              </div>
            {%- when 'title' -%}
              <div class="product__title" {{ block.shopify_attributes }}>
              <h1>{{ product.title | escape }}</h1>
                <h2 class="pdp_benefits">{{product.metafields.benefits.benefits_text}}</h2>
                <a href="{{ product.url }}" class="product__title">
                  <h2 class="h2">
                    {{ product.title | escape }}
                  </h2> 
                </a>
              </div>
<!--               <div class="yotpo-review-wrapper">
                  <div class="yotpo bottomLine"
                    data-product-id="{{ product.id }}"></div>
              </div> -->

            {%- when 'price' -%}

              <!-- Runs a check to see if the product is a gift product, and skips element if it is -->
              {% include 'hide-pdp-form' %}

              <div class="no-js-hidden" id="price-{{ section.id }}" role="status" {{ block.shopify_attributes }}>
                {%- render 'price', product: product, use_variant: true, show_badges: false, price_class: 'price--large' -%}
              </div>
             
              {% assign afterpayPrice = product.price | divided_by: 100 %}

            {%- when 'description' -%}
              {%- if product.description != blank -%}
                <div class="product__description rte quick-add-hidden">
                  {{ product.description }}
                </div>
              {%- endif -%}
            {%- when 'custom_liquid' -%}
              {{ block.settings.custom_liquid }}
            {%- when 'collapsible_tab' -%}
              <div class="product__accordion accordion quick-add-hidden" {{ block.shopify_attributes }}>
                <details id="Details-{{ block.id }}-{{ section.id }}">
                  <summary>
                    <div class="summary__title">
                      {% render 'icon-accordion', icon: block.settings.icon %}
                      <h2 class="h4 accordion__title">
                        {{ block.settings.heading | default: block.settings.page.title }}
                      </h2>
                    </div>
                    {% render 'icon-caret' %}
                  </summary>
                  <div class="accordion__content rte" id="ProductAccordion-{{ block.id }}-{{ section.id }}">
                    {{ block.settings.content }}
                    {{ block.settings.page.content }}
                  </div>
                </details>
              </div>
            {%- when 'quantity_selector' -%}

              <!-- Runs a check to see if the product is a gift product, and skips element if it is -->
              {% include 'hide-pdp-form' %}

              {%- if template.suffix == blank -%}
                {% if product.selected_or_first_available_variant.available == false %} 
  
  
  {%- else -%}
                <div class="product-form__input product-form__quantity{% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_vertical_offset < 0 %} product-form__quantity-top{% endif %}" {{ block.shopify_attributes }}>
                  <label class="form__label" for="Quantity-{{ section.id }}">
                    {{ 'products.product.quantity.label' | t }}
                  </label>

                  <quantity-input class="quantity">
                    <button class="quantity__button no-js-hidden" name="minus" type="button">
                      <span class="visually-hidden">{{ 'products.product.quantity.decrease' | t: product: product.title | escape }}</span>
                      {% render 'icon-minus' %}
                    </button>
                    <input class="quantity__input"
                        type="number"
                        name="quantity"
                        id="Quantity-{{ section.id }}"
                        min="1"
                        value="1"
                        form="{{ product_form_id }}"
                      >
                    <button class="quantity__button no-js-hidden" name="plus" type="button">
                      <span class="visually-hidden">{{ 'products.product.quantity.increase' | t: product: product.title | escape }}</span>
                      {% render 'icon-plus' %}
                    </button>
                  </quantity-input>
                </div>
                      {%- endif -%}
                {%- endif -%}
            {%- when 'popup' -%}
                <modal-opener class="product-popup-modal__opener no-js-hidden quick-add-hidden" data-modal="#PopupModal-{{ block.id }}" {{ block.shopify_attributes }}>
                  <button id="ProductPopup-{{ block.id }}" class="product-popup-modal__button link" type="button" aria-haspopup="dialog">{{ block.settings.text | default: block.settings.page.title }}</button>
                </modal-opener>
                <a href="{{ block.settings.page.url }}" class="product-popup-modal__button link no-js">{{ block.settings.text }}</a>
            {%- when 'share' -%}
              <share-button id="Share-{{ section.id }}" class="share-button quick-add-hidden" {{ block.shopify_attributes }}>
                <button class="share-button__button hidden">
                  {% render 'icon-share' %}
                  {{ block.settings.share_label | escape }}
                </button>
                <details id="Details-{{ block.id }}-{{ section.id }}">
                  <summary class="share-button__button">
                    {% render 'icon-share' %}
                    {{ block.settings.share_label | escape }}
                  </summary>
                  <div id="Product-share-{{ section.id }}" class="share-button__fallback motion-reduce">
                    <div class="field">
                      <span id="ShareMessage-{{ section.id }}" class="share-button__message hidden" role="status">
                      </span>
                      <input type="text"
                            class="field__input"
                            id="url"
                            value="{{ product.selected_variant.url | default: product.url | prepend: request.origin }}"
                            placeholder="{{ 'general.share.share_url' | t }}"
                            onclick="this.select();"
                            readonly
                      >
                      <label class="field__label" for="url">{{ 'general.share.share_url' | t }}</label>
                    </div>
                    <button class="share-button__close hidden no-js-hidden">
                      {% render 'icon-close' %}
                      <span class="visually-hidden">{{ 'general.share.close' | t }}</span>
                    </button>
                    <button class="share-button__copy no-js-hidden">
                      {% render 'icon-clipboard' %}
                      <span class="visually-hidden">{{ 'general.share.copy_to_clipboard' | t }}</span>
                    </button>
                  </div>
                </details>
              </share-button>
              <script src="{{ 'share.js' | asset_url }}" defer="defer"></script>
            {%- when 'variant_picker' -%}

              <!-- Runs a check to see if the product is a gift product, and skips element if it is -->
              {% include 'hide-pdp-form' %}

              {%- unless product.has_only_default_variant -%}
                {%- if block.settings.picker_type == 'button' -%}
                  <variant-radios class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}" {{ block.shopify_attributes }}>
                    {%- for option in product.options_with_values -%}
                        <fieldset class="js product-form__input">
                          <legend class="form__label"><h4>{{ option.name | downcase }}:</h4></legend>
                          {%- for value in option.values -%}
                            <input type="radio" id="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}"
                                  name="{{ option.name }}"
                            {% if product.id == 5710551974040 %}
                                  {% assign label_name = forloop.index0 %}
                                  {% case label_name %}
                                    {% when 0 %}
                                      {% assign label_name = '1oz' %}
                                    {% when 1 %}
                                      {% assign label_name = '5oz' %}
                                    {% when 2 %}
                                      {% assign label_name = '10oz' %}
                                  {% endcase %}
                                  data-intellimize-id="label_{{ label_name }}"
                                {% endif %}
                                  value="{{ value | escape }}"
                                  form="{{ product_form_id }}"
                                  {% if option.selected_value == value %}checked{% endif %}
                                    selected-value="{{ value | remove: ' ' }}"
                                  {% if product.metafields.accentuate.hide_recharge_variant %} 
                                  hide-variant = "{% for value in product.metafields.accentuate.hide_recharge_variant %}{{product.metafields.accentuate.hide_recharge_variant[forloop.index0]}} {% endfor %}"
                                {% endif %}   
                            >
                            <label for="{{ section.id }}-{{ option.position }}-{{ forloop.index0 }}"
                                {% if product.id == 5710551974040 %}
                                  {% assign label_name = forloop.index0 %}
                                  {% case label_name %}
                                    {% when 0 %}
                                      {% assign label_name = '1oz' %}
                                    {% when 1 %}
                                      {% assign label_name = '5oz' %}
                                    {% when 2 %}
                                      {% assign label_name = '10oz' %}
                                  {% endcase %}
                                  data-intellimize-id="label_{{ label_name }}"
                                {% endif %}>
                              {{ value }} 
                            </label>
                          {%- endfor -%}
                        </fieldset>
                    {%- endfor -%}
                    <script type="application/json">
                      {{ product.variants | json }}
                    </script>
                  </variant-radios>
                {%- else -%}
                  <variant-selects class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}" {{ block.shopify_attributes }}>
                    {%- for option in product.options_with_values -%}
                      <div class="product-form__input product-form__input--dropdown">
                        <label class="form__label" for="Option-{{ section.id }}-{{ forloop.index0 }}">
                          {{ option.name }}
                        </label>
                        <div class="select">
                          <select id="Option-{{ section.id }}-{{ forloop.index0 }}"
                            class="select__select"
                            name="options[{{ option.name | escape }}]"
                            form="{{ product_form_id }}"
                          >
                            {%- for value in option.values -%}
                              <option value="{{ value | escape }}" {% if option.selected_value == value %}selected="selected"{% endif %}>
                                {{ value }}
                              </option>
                            {%- endfor -%}
                          </select>
                          {% render 'icon-caret' %}
                        </div>
                      </div>
                    {%- endfor -%}

                    <script type="application/json">
                      {{ product.variants | json }}
                    </script>
                  </variant-selects>
                {%- endif -%}
              {%- endunless -%}

              {%- if template.suffix == blank -%}
                <!-- START Fenix EDD -->
                {% comment %} <div class="fenix-pdp-wrapper"><div class="fenix-delivery-estimate-cart"></div>{% if product.selected_or_first_available_variant.available %}{%- include 'fenix-pdp-template' -%}{% endif %} 
                </div>
                     {% if product.selected_or_first_available_variant.available == false %}
                     <div id="backInStock-btn" class="klaviyo-backinstock-btn" style="display:block !important;">
                      </div> -->
                    {% endif %} 
                    {% endcomment %}
                <!-- END Fenix EDD -->
{% if product.selected_or_first_available_variant.available == false %}
  {%- else -%}
                {% comment %} {% if product.metafields.accentuate.delivery_headline != blank %}
                <p class="event-message">{{ product.metafields.accentuate.delivery_headline }}</p>
              {% else if settings.fallback_delivery_message != blank %}
                {%- if section.settings.show_event_message -%}
                  <!-- START PRODUCT PAGE EVENT MESSAGE -->
                  <p class="event-message">{{section.settings.event_message}}</p>
                  <!-- END PRODUCT PAGE EVENT MESSAGE -->
                {%- endif -%} 
              {%- endif -%}{% endcomment %}
              {%- endif -%}



              <noscript class="product-form__noscript-wrapper-{{ section.id }}">
                <div class="product-form__input{% if product.has_only_default_variant %} hidden{% endif %}">
                  <label class="form__label" for="Variants-{{ section.id }}">{{ 'products.product.product_variants' | t }}</label>
                  <div class="select">
                    <select name="id" id="Variants-{{ section.id }}" class="select__select" form="{{ product_form_id }}">
                      {%- for variant in product.variants -%}
                        <option
                          {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                          {% if variant.available == false %}disabled{% endif %}
                          value="{{ variant.id }}"
                        >
                          {{ variant.title }}
                          {%- if variant.available == false %} - {{ 'products.product.sold_out' | t }}{% endif %}
                          - {{ variant.price | money | strip_html }}
                        </option>
                      {%- endfor -%}
                    </select>
                    {% render 'icon-caret' %}
                  </div>
                </div>
              </noscript>
                {%- endif -%}
            {%- when 'buy_buttons' -%}

              <!-- Runs a check to see if the product is a gift product, and skips element if it is -->
              {% include 'hide-pdp-form' %}


              {%- if template.suffix == blank -%}
{% if product.selected_or_first_available_variant.available == false %} 
  
  
  {%- else -%}
              <div {{ block.shopify_attributes }} class="product-form-container">
                <product-form class="product-form">
                  <div class="product-form__error-message-wrapper" role="alert" hidden>
                    <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-error" viewBox="0 0 13 13">
                      <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                      <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                      <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                      <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                    </svg>
                    <span class="product-form__error-message"></span>
                  </div>

                  {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form', data-productid: product.id -%}
                    <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
                    <input type="hidden" name="properties[_rechargeOrder]" value="false">
                    <input type="hidden" name="properties[_disableRechargeVariant]" value="false">
                    <input type="hidden" name="properties[_tryNow]" value="false">
                      
                  <div class="product-form__buttons">
                    <button
                     onclick="pdstATC(event, 
                        {{product.id}},
                        '{{ product.title }}',
                        '{{ product.vendor }}', 
                        {{- product.selected_or_first_available_variant.id -}},
                        '{{- product.selected_or_first_available_variant.title -}}',
                        '{{ product.type }}')";
                      type="submit"
                      name="add"
                      alt="Add to Cart Button"
                      class="product-form__submit product-form--atc-button button button--full-width {% if block.settings.show_dynamic_checkout and product.selling_plan_groups == empty %}button--secondary{% else %}button--primary{% endif %}"
                      {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
                    >
                        <span>
                          {%- if product.selected_or_first_available_variant.available -%}
                            {{ 'products.product.add_to_cart' | t }}
                          {%- else -%}
                            {{ 'products.product.sold_out' | t }}
                          {%- endif -%}
                        </span>

                        <div class="loading-overlay__spinner hidden">
                          <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                            <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                          </svg>
                        </div>

                    </button>
                    {%- if block.settings.show_dynamic_checkout -%}
                      {{ form | payment_button }}
                    {%- endif -%}
                  </div>
                  {%- endform -%}
                </product-form>

                {%- else -%}
                  <div class="prod-form-notification-container">
                    <div class="notification-banner-wrapper">
                      {%- case template.suffix -%}
                        {%- when 'coming-soon'-%}
                          <p class="notification-banner">Coming Soon</p>
                          <p class="notification-banner-copy">Sign-up below to get live updates!</p>
                        {%- when 'sold-out'-%}
                          <p class="notification-banner">Sold out</p>
                          <p class="notification-banner-copy">Get notified when back in stock!</p>
                        {%- when 'out-of-stock'-%}
                          <p class="notification-banner">Out of stock</p>
                          <p class="notification-banner-copy">Get notified when back in stock!</p>
                        {%- when 'discontinued'-%}
                          <p class="notification-banner">Discontinued</p>
                          <p class="notification-banner-copy">Sign-up below to get live updates!</p>
                      {%- endcase -%}
                    </div>
                    <form id="email_signup-pdp" class="klaviyo_form_actions klaviyo_styling klaviyo_gdpr_embed_{{klavEmailList}}" action="https://manage.kmail-lists.com/subscriptions/subscribe?a=JvUywn&amp;g={{klavEmailList}}" method="POST" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" target="_blank" novalidate="novalidate">
                      <input class="form-email-input" type="hidden" name="g" value="{{klavEmailList}}">
                      <div class="inner-form-container klaviyo_field_group">
                        <input class="form-email" type="email" value="" name="email" id="k_id_email" placeholder="Enter your email address" style="cursor: auto;">
                        <button onclick="buttonPost()" class="klaviyo_form_actions cs-submit-btn" type="submit">
                          <div class="cs-btn-text">
                            NOTIFY ME
                          </div>
                        </button>
                      </div>
                    </form>
                <div class="klaviyo_messages">
                  <div class="success_message" style="display:none;"></div>
                  <div class="error_message" style="display:none;"></div>
              </div>
                  </div>
 {%- endif -%}
                {%- endif -%}

                <!-- START Product types and tags for Robert (Dev purposes only) -->
                {% comment %}
                  <h2>Tags</h2>
                  <ul>
                  {% for tag in product.tags %}
                    {% if tag == "Discontinued" or tag == "discontinued" or tag == "Comingsoon" or tag == "GWP" %}
                      <li>{{ tag }}</li>
                    {% endif %}
                  {% endfor %}
                </ul>
                <h2>Type</h2>
                <ul>
                  {% if product.type == "sample" or product.type == "exclusive offer" or product.type == "promotional" or product.type == "free gift" %}
                    <li>{{ product.type }}</li>
                  {% endif %}
                </ul>
                {% endcomment %}
                <!-- END Product types and tags for dev purposes only -->

                <!-- START Free delivery message -->
                {% comment %}
                <div class="free-delivery-message">
                 {% if product.metafields.accentuate.delivery_headline_rich_text != blank %}
                   {{ product.metafields.accentuate.delivery_headline_rich_text }}
                 {% else if settings.fallback_delivery_message != blank %}
                   {{ settings.fallback_delivery_message }}
                 {% endif %}
                </div>
                {% endcomment %}
                <!-- end Free delivery message -->

                {{ 'component-pickup-availability.css' | asset_url | stylesheet_tag }}

                {%- assign pick_up_availabilities = product.selected_or_first_available_variant.store_availabilities | where: 'pick_up_enabled', true -%}

                <pickup-availability class="product__pickup-availabilities no-js-hidden quick-add-hidden"
                  {% if product.selected_or_first_available_variant.available and pick_up_availabilities.size > 0 %} available{% endif %}
                  data-root-url="{{ routes.root_url }}"
                  data-variant-id="{{ product.selected_or_first_available_variant.id }}"
                  data-has-only-default-variant="{{ product.has_only_default_variant }}"
                >
                  <template>
                    <pickup-availability-preview class="pickup-availability-preview">
                      {% render 'icon-unavailable' %}
                      <div class="pickup-availability-info">
                        <p class="caption-large">{{ 'products.product.pickup_availability.unavailable' | t }}</p>
                        <button class="pickup-availability-button link link--text underlined-link">{{ 'products.product.pickup_availability.refresh' | t }}</button>
                      </div>
                    </pickup-availability-preview>
                  </template>
                </pickup-availability>

                {% if block.settings.guarantee_text != blank %}
                  <a href="{{ block.settings.guarantee_link }}" class="product__guarantee" target="_blank" title="{{ block.settings.guarantee_text }}">{{ block.settings.guarantee_text }}</a>
                {% endif %}

              </div>

              <script src="{{ 'pickup-availability.js' | asset_url }}" defer="defer"></script>
            {%- when 'rating' -%}
              {%- if product.metafields.reviews.rating.value != blank -%}
                {% liquid
                 assign rating_decimal = 0
                 assign decimal = product.metafields.reviews.rating.value.rating | modulo: 1
                 if decimal >= 0.3 and decimal <= 0.7
                  assign rating_decimal = 0.5
                elsif decimal > 0.7
                  assign rating_decimal = 1
                 endif
                %}
                <div class="rating" role="img" aria-label="{{ 'accessibility.star_reviews_info' | t: rating_value: product.metafields.reviews.rating.value, rating_max: product.metafields.reviews.rating.value.scale_max }}">
                  <span aria-hidden="true" class="rating-star color-icon-{{ settings.accent_icons }}" style="--rating: {{ product.metafields.reviews.rating.value.rating | floor }}; --rating-max: {{ product.metafields.reviews.rating.value.scale_max }}; --rating-decimal: {{ rating_decimal }};"></span>
                </div>
                <p class="rating-text caption">
                  <span aria-hidden="true">{{ product.metafields.reviews.rating.value }} / {{ product.metafields.reviews.rating.value.scale_max }}</span>
                </p>
                <p class="rating-count caption">
                  <span aria-hidden="true">({{ product.metafields.reviews.rating_count }})</span>
                  <span class="visually-hidden">{{ product.metafields.reviews.rating_count }} {{ "accessibility.total_reviews" | t }}</span>
                </p>
              {%- endif -%}
                {%- when 'usage' -%}
                  <div class="">
                    {% for variant in product.variants %}
                      {% if variant.metafields.my_fields.usage != blank %}
                        <span class="product--usage {% if product.selected_or_first_available_variant.id == variant.id %}active{% endif %}" data-variantid="{{ variant.id }}">{{  variant.metafields.my_fields.usage }}</span>
                      {% endif %}
                    {% endfor %}
                  </div>
                {%- when 'skin_type' -%}
                  {% if product.metafields.my_fields.skin_condition_exclude != true %}
                    <div class="product-skincon">
                      {% include 'skin-type' %}
                    </div>
                  {% endif %}
                  {%- when 'complementary_products' -%}
                    <style>
                      .complementary_products{
                        max-width:400px;
                      }
                      h4.complementary_products_heading{
                        color: #5B6670;
                        font-size: 18px;
                        font-weight: 700;
                        line-height: 24px; /* 150% */
                        letter-spacing: 0.08px
                      }
                      div.complementary_products_wrapper{
                        display: flex;
                        flex-direction: row;
                        align-items: flex-start;
                        width:100%;
                        gap:20px;
                        margin-bottom: 24px;
                      }
                      .complementary_products_image{
                        width: 34%;
                        min-width: 34%;
                      }
                      .complementary_products_image a{
                        display:flex;
                        width: 100%;
                        height: 100%;
                      }
                      .complementary_product__info{
                        width:100%;
                        display: flex;
                        flex-direction: column;
                        align-self: stretch;
                        gap: 12px;
                      }
                      .complementary_product__content{
                        display:flex;
                        flex-direction:column;
                      }
                      .complementary_product__info > p, .complementary_product__title_price > p,  .complementary_product__info > a p ,.complementary_product__title_price > a p{
                        margin:0px
                      }
                      .complementary_product__title_price > a p:first-child {
                        max-width:80%;
                      }
                      .complementary_product__title_price > a p {
                        max-width:80%;
                      }
                      img.product__img{
                        width:100%;
                        aspect-ratio:1/1;
                      }
                      .complementary_product__title_price a{
                        display:flex;
                        flex-direction:row;
                        justify-content:space-between;
                        align-items: center;
                      }
                      .complementary_product__benefits, .complementary_product__title{
                        line-height: 18px;
                      }
                      .complementary_product__title{
                        font-weight:700;
                      }
                      .complementary_product__title:hover{
                        text-decoration:underline;
                      }
                      .complementary_product__title {
                        font-size: 14px;
                        letter-spacing: 0.06px;
                        color:#5B6670;
                        line-height: 20px;
                      }
                      p.complementary_product__price{
                        letter-spacing: 0.08px;
                        margin:0px;
                        color:#5B6670;
                        font-size: 14px;
                        line-height: 20px;
                        margin-top: 8px;
                      }
                      .complementary_product__benefits{
                        font-size: 12px;
                        letter-spacing: 0.05px;
                        margin:0px;
                        color:#5B6670;
                        line-height: 18px;
                      }
                      .complementary_product_atc_btn{
                        cursor:pointer;
                        color:#fff;
                        display: flex;
                        height: 36px;
                        min-width:150px;
                        width:min-content;
                        padding: 8px 16px;
                        flex-direction: row;
                        align-items: center;
                        align-self: stretch;
                        justify-content: center;
                        border: 1px solid #5B6670;
                        background: #5B6670;
                        text-align: center;
                        font-family: Helvetica;
                        font-size: 14px;
                        font-weight: 700;
                        line-height: 20px;
                        letter-spacing: 1.4px;
                        gap: 5px;
                      }
                      .complementary_product_atc_btn:hover{
                        background: #fff;
                        color:#5B6670;
                      }
                      .complementary_product_atc_btn:hover path{
                        stroke:#5B6670;
                      }
                      svg.icon-plus{
                        margin-left:3px;
                        margin-bottom:3px;
                        width:10px;
                      }
                    </style>
                <div
            class="product-recommendations complementary_products"
            data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&limit={{ block.settings.item_count }}&intent=complementary"
>

<div class="complementary_products_container">
   {% if recommendations.intent == 'related' %}
  <h4>You may also like</h4>
{% elsif recommendations.intent == 'complementary' %}
  <h4 class="complementary_products_heading">{{ block.settings.complementary_heading_id }}</h4>
{% endif %}
  {%- for product in recommendations.products -%}


    {% assign product_handle = product.metafields.accentuate.preselected_featured_variant | split: ':' | first %}
    {% assign variant_id = product.metafields.accentuate.preselected_featured_variant | split: ':' | last | plus: 0 %}
    
    {% assign referenced_product = all_products[product_handle] %}
    {% assign referenced_variant = referenced_product.variants | where: "id", variant_id | first %}
    
   

    <div class="product complementary_products_wrapper">
      
      <div class="complementary_products_image">
        <a href="{{ product.url }}">
          <img
            class="product__img"
            src="{{ product.featured_image | image_url: width: 300, height: 300 }}"
            alt="{{ product.featured_image.alt }}"
          />
        </a>
      </div>
      <div class="complementary_product__info">
        <div class="complementary_product__content">
          <!-- <p  class="complementary_product__benefits">{{ product.metafields.filters.product_category | replace: "[", "" | replace: "]", "" | replace: '"', "" }}</p> -->
            <div class="complementary_product__title_price">
              <a href="{{ product.url }}">
                <p class="complementary_product__title"> {{ product.title }}</p>
              </a>
              <!-- <p class="complementary_product__price">{{ referenced_variant.price | money}}</p> -->
            </div>
        
        <p  class="complementary_product__benefits">{{product.metafields.benefits.benefits_text}}</p>
           <p class="complementary_product__price">{{ referenced_variant.price | money}}</p>
        </div>
        
        <button alt="Add to Cart Button" class="complementary_product_atc_btn atc_variant_button" onclick="Shopify.derm_custom.addToBagShopify(event,{{referenced_variant.id}});"><span style="pointer-events: none; display:flex;">
          <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10.5 4.16669V15.8334M4.66667 10H16.3333" stroke="white" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
          </svg> 
            ADD 
          </span>
          <div class="derm-loading-spinner">
          <div>
          
          </div>
          </div></button>
     
      </div>
        
      
    </div>
  {%- endfor -%}
</div>

</div>
            {%- endcase -%}
          {%- endfor -%}
          <a href="{{ product.url }}" class="link product__view-details animate-arrow">
            {{ 'products.product.view_full_details' | t }}
            {% render 'icon-arrow' %}
          </a>
        </div>
      </div>
    </div>

    {% if product.metafields.additional.title != blank %}
      {{ 'custom-product-accordion.css' | asset_url | stylesheet_tag }}
          {% if roduct.metafields.accentuate.accordion_banner__desktop != blank or product.metafields.accentuate.accordion_banner__mobile != blank %}
          <div class="accordion_banner_container">
            <img class="pdp_banner_desktop fr-fic fr-dii" src="{{ product.metafields.accentuate.accordion_banner__desktop }}" alt="{{ product.metafields.accentuate.add__alt_text_to_image }}">&nbsp;<img class="pdp_banner_mobile fr-fic fr-dii" src="{{ product.metafields.accentuate.accordion_banner__mobile }}" alt="{{ product.metafields.accentuate.add__alt_text_to_image }}"></p>
          </div>
        {% endif %}
      <section class="product-section--container product-row--container product--hero product--extra product--accordion">
        <div class="product-description rte" data-product-description>
          {% for value in product.metafields.additional.title %}
            {% assign value_title =  product.metafields.additional.title[forloop.index0] %}
            {% assign value_intro =  product.metafields.additional.intro[forloop.index0] %}
            {% assign value_content_title =  product.metafields.additional.content_title[forloop.index0] %}
            {% assign value_content =  product.metafields.additional.content[forloop.index0] %}

            {% if value_title != blank %}
              <details>
                <summary>
                  <div tabindex="-1" class="summary-wrapper">
                    <h5 class="headline">{{ value_title }}</h5>
                    {% if value_intro != '' %}
                      <h5 class="sub-headline">
                      {{ value_intro }}
                      </h5>
                    {% endif %}
                  </div>
                </summary>
                <div class="indent-content">
                  {% if value_content_title != '' %}
                    <h5>{{ value_content_title }} </h5>
                  {% endif %}
                  <div id="indent-content-{{- forloop.index0 }}">
                  {% if value_content != blank %}
                    {{ value_content }}
                  {% endif %}
              </div>
                </div>
              </details>
            {% endif %}

          {% endfor %}
        </div>
      </section>
          <style>
            skp-widget {
          margin: 52px !important;
          }
          
          :root {
          --skp-thumbnail-width: 250px; 
          --skp-thumbnail-height: 250px; 
          --skp-slider-nav-color:#5b6670;
          --skp-primary-color: #5b6670;
          --skp-font-family: 'Helvetica', sans-serif
          } 
          
          </style>

                <div class="skeeper_container" style="width:100%; margin-top:2em;">
                  <h2 class="skeeper_header" style="text-align:center;">real skin, real results</h2>
                  <skp-widget product="{{- product.id -}}" style="width:100%; height:400px"> </skp-widget> 
                </div>
      
    {% endif %}
    {% for value in product.metafields.product_hero.title %}
      {% assign value_title = product.metafields.product_hero.title[forloop.index0] %}
      {% assign value_class = value_title | strip | handleize %}
      {% assign value_content = product.metafields.product_hero.content[forloop.index0] %}
      <section class="product-section--container product-row--container product--hero {{ value_class }}">
        {% if value_content != blank %}
          {{ value_content }}
        {% endif %}
      </section>
    {% endfor %}

    <div id="product-mobileAtc"></div>

    <product-modal id="ProductModal-{{ section.id }}" class="product-media-modal media-modal">
      <div class="product-media-modal__dialog" role="dialog" aria-label="{{ 'products.modal.label' | t }}" aria-modal="true" tabindex="-1">
        <button id="ModalClose-{{ section.id }}" type="button" class="product-media-modal__toggle" aria-label="{{ 'accessibility.close' | t }}">{% render 'icon-close' %}</button>

        <div class="product-media-modal__content gradient" role="document" aria-label="{{ 'products.modal.label' | t }}" tabindex="0">
          {%- liquid
            if product.selected_or_first_available_variant.featured_media != null
              assign media = product.selected_or_first_available_variant.featured_media
              render 'product-media', media: media, loop: section.settings.enable_video_looping, variant_image: section.settings.hide_variants
            endif
          -%}

          {%- for media in product.media -%}
            {%- liquid
              if section.settings.hide_variants and variant_images contains media.src
                assign variant_image = true
              else
                assign variant_image = false
              endif

              unless media.id == product.selected_or_first_available_variant.featured_media.id
                render 'product-media', media: media, loop: section.settings.enable_video_looping, variant_image: variant_image
              endunless
            -%}
          {%- endfor -%}
        </div>
      </div>
    </product-modal>

    {% assign popups = section.blocks | where: "type", "popup" %}
    {%- for block in popups -%}
      <modal-dialog id="PopupModal-{{ block.id }}" class="product-popup-modal" {{ block.shopify_attributes }}>
        <div role="dialog" aria-label="{{ block.settings.text }}" aria-modal="true" class="product-popup-modal__content" tabindex="-1">
          <button id="ModalClose-{{ block.id }}" type="button" class="product-popup-modal__toggle" aria-label="{{ 'accessibility.close' | t }}">{% render 'icon-close' %}</button>
          <div class="product-popup-modal__content-info">
            <h1 class="h2">{{ block.settings.page.title }}</h1>
            {{ block.settings.page.content }}
          </div>
        </div>
      </modal-dialog>
    {%- endfor -%}

    {%- if product.media.size > 0 -%}
      <script src="{{ 'product-modal.js' | asset_url }}" defer="defer"></script>
      <script src="{{ 'media-gallery.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {%- if first_3d_model -%}
      <script type="application/json" id="ProductJSON-{{ product.id }}">
        {{ product.media | where: 'media_type', 'model' | json }}
      </script>
      <script src="{{ 'product-model.js' | asset_url }}" defer></script>
    {%- endif -%}

 
  <script>
  window.addEventListener('skp:addToCart', (event) => { 
  const { origin, product } = event.detail 


  
// addProductToCustomerCart(product);
// Trigger your add to cart functionality with your own implementation 
  
  Shopify.derm_custom.addToBagShopify(event, product.id );

// sendTrackingToYourPlatform(origin, product); 
// Send tracking informations to your platform 
})

document.addEventListener('DOMContentLoaded', function() {
  setTimeout(function() {
  if(!document.querySelector("div > skp-widget").shadowRoot.querySelector("div")){
     document.querySelector('h2.skeeper_header').style.display = "none";
  }
  },2000);
});

const handleIntersection = (entries, observer) => {
    if (!entries[0].isIntersecting) return;

    observer.unobserve(productRecommendationsSection);

    const url = productRecommendationsSection.dataset.url;

    fetch(url)
      .then(response => response.text())
      .then(text => {
        const html = document.createElement('div');
        html.innerHTML = text;
        const recommendations = html.querySelector('.product-recommendations');

        if (recommendations && recommendations.innerHTML.trim().length) {
          productRecommendationsSection.innerHTML = recommendations.innerHTML;
        }
      })
      .catch(e => {
        console.error(e);
      });
  };

  const productRecommendationsSection = document.querySelector('.product-recommendations');
  const observer = new IntersectionObserver(handleIntersection, {rootMargin: '0px 0px 200px 0px'});

  observer.observe(productRecommendationsSection);

    
   document.addEventListener('DOMContentLoaded', function () {
       setTimeout(function() {
            var complementaryWrappers = document.querySelectorAll('.complementary_products_wrapper');
            if (complementaryWrappers.length === 0) {
                var complementaryProducts = document.querySelector('.complementary_products');
                if (complementaryProducts) {
                    complementaryProducts.style.display = 'none';
                }
            }
               const buttons = document.querySelectorAll('.complementary_product_atc_btn');
      
              buttons.forEach(button => {
              button.addEventListener('click', function() {
              // Change the background color of the clicked button to #fff (white)
                console.log("test");
                this.style.backgroundColor = '#fff';
                this.style.border = '1px solid #5B6670';
                this.style.color = '#5B6670';
                this.innerHTML = `<svg class="icon icon-checkmark" width="15" height="10" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 9" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.35.643a.5.5 0 01.006.707l-6.77 6.886a.5.5 0 01-.719-.006L.638 4.845a.5.5 0 11.724-.69l2.872 3.011 6.41-6.517a.5.5 0 01.707-.006h-.001z" fill="currentColor"/></svg>ADDED`;
                
              });
          });
       }, 1000);


     
        });
</script>                      

  <script>
      
//******** Hide Selected Recharge Variants

  function removeSellingPlan(){
  const originalUrl = window.location.href;
  const url = new URL(originalUrl);
  const searchParams = new URLSearchParams(url.search);
  searchParams.delete('selling_plan');
  url.search = searchParams.toString();
  const updatedUrl = url.toString();
  history.pushState(null, '', updatedUrl);
}

function addSellingPlan(sellingPlan) {
  const url = new URL(window.location.href);
  const searchParams = new URLSearchParams(url.search);
  searchParams.append('selling_plan', sellingPlan);
  url.search = searchParams.toString();
  const updatedUrl = url.toString();
  history.pushState(null, '', updatedUrl);
}
document.addEventListener('DOMContentLoaded', function() {

  setTimeout(function() {


  var recharge_oneTime = document.querySelector("#rc-radio1");
  var recharge_subscription = document.querySelector("#rc-radio2");
  var selectedVariant = document.querySelector('input[type="radio"][name="size"]:checked');

  if (selectedVariant !== null) {
  var hideVariantAttribute = selectedVariant.getAttribute('hide-variant');
  if (hideVariantAttribute !== null) {
    var hideVariantList = hideVariantAttribute.match(/\d+(\.\d+)?\s*oz/g);
    console.log("Hide Variant List:", hideVariantList);
  }
}

if (selectedVariant) {
            // Display RC Widget
            if (!hideVariantList.includes(selectedVariant.getAttribute('value').trim())){
            document.querySelector(".rc-widget").style.display="block";
            document.querySelector('.product__text[data-intellimize-id="intellimize-textbox"]').style.display = "block";
              } 
            // Hide RC Widget
            else {
              document.querySelector(".rc-widget").style.display="none";
              recharge_subscription.checked = false;
              recharge_oneTime.checked = true;
              document.querySelector('input[name="properties[_rechargeOrder]"]').setAttribute("value", "false");
              document.querySelector('input[name="properties[_disableRechargeVariant]').setAttribute("value", "true");
              document.querySelector('input[name="properties[_tryNow]"]').setAttribute("value", "false");
              document.querySelector('.product-form-container [name="selling_plan"]').value = '';
               removeSellingPlan();
            }
        }
  }, 2000);

  
});


// Monitor ReCharge radio buttons for change
function hideRechargeVariant(){
  recharge_oneTime = document.querySelector("#rc-radio1");
  recharge_subscription = document.querySelector("#rc-radio2");
  document.querySelector(".rc-widget").style.display="none";
  recharge_subscription.checked = false;
  recharge_oneTime.checked = true;
  document.querySelector('input[name="properties[_rechargeOrder]"]').setAttribute("value", "false");
  document.querySelector('input[name="properties[_disableRechargeVariant]').setAttribute("value", "true")
  document.querySelector('.product-form-container [name="selling_plan"]').value = '';
  document.querySelector('.product__text[data-intellimize-id="intellimize-textbox"]').style.display = "none";
}

function displayRechargeVariant(){

    recharge_oneTime = document.querySelector("#rc-radio1");
    recharge_subscription = document.querySelector("#rc-radio2");
    document.querySelector(".rc-widget").style.display="block";
    document.querySelector('input[name="properties[_disableRechargeVariant]').setAttribute("value", "false")
    defaultSellingId=document.querySelector('.rc-selling-plans-dropdown__select');
    document.querySelector('.product__text[data-intellimize-id="intellimize-textbox"]').style.display = "block";
    var selectedOption = defaultSellingId.options[defaultSellingId.selectedIndex];
    var selectedValue = selectedOption.value;
    recharge_subscription.checked = true;
    recharge_oneTime.checked = false;
    recharge_subscription_label = document.querySelector(".subscription-radio");
    recharge_subscription_label.classList.add('rc-radio--active');
    recharge_selling_plans = document.querySelector(".rc-selling-plans");
    recharge_selling_plans.style.display='block';
    trynow_label = document.querySelector(".trynow_label");
    trynow_label.classList.remove('trynow--active');
    recharge_oneTime_label = document.querySelector(".onetime-radio");
    recharge_oneTime_label.classList.remove('rc-radio--active');

   if( document.getElementById('rc-radio1').checked ){
      document.querySelector('input[name="properties[_rechargeOrder]').setAttribute("value", "false");
    
    }else{
      document.querySelector('input[name="properties[_rechargeOrder]').setAttribute("value", "true");
   
    }
    setTimeout(() => {
          var recharge_widget = document.querySelector('.rc-selling-plans');
          if (recharge_widget && !recharge_widget.querySelector('.recharge__features')) {
 
            
          recharge_widget.innerHTML += "<ul class='recharge__features'><li>free shipping</li><li>free 30-day returns</li><li>easy cancellations</li><li><span>gift and&nbsp;</span><span  class=points_earned> 2x </span><span>&nbsp;points with every order</span></li></ul>";
           const numeric_price = parseFloat(priceUpdate.replace('$', ''));
        const total_points_earned = numeric_price * 2;
        const points_earned_span = document.querySelector('.points_earned');
        points_earned_span.textContent = total_points_earned;
          
          }
    }, 5000); 
    document.querySelector('.product-form-container [name="selling_plan"]').value = selectedValue;
}

var variant_option = document.querySelectorAll('input[type="radio"]');

variant_option.forEach(option => option.addEventListener('change', function() {
trynowSelected = document.getElementById('selling-plan_trynow');
setTimeout(function() {
// Select the original span element
const originalSpan = document.querySelector('.rc-radio__label');

// Get the text content and split it based on a regular expression
const [labelText, priceText] = originalSpan.textContent.trim().split(/(\$[\d.]+)/);
const priceUpdate = document.querySelector(".rc-radio__price").textContent;
const priceUpdate2 = document.querySelector(".subscription-radio .rc-radio__price")
if(priceUpdate2){
  priceUpdate2.innerHTML = priceUpdate2.textContent.replace(".00","")
}
// Create new span elements for the label and price
const labelSpan = document.createElement('span');
const priceSpan = document.createElement('span');
priceSpan.classList.add('one-time__price');

// Assign the appropriate texts to the new spans
labelSpan.textContent = labelText.trim();
priceSpan.textContent = priceUpdate.replace(".00","");
priceSpan.classList.add('one-time__price');

// Clear the original span and append the new spans to it
originalSpan.textContent = '';
originalSpan.appendChild(labelSpan);
originalSpan.appendChild(priceSpan);


          // console.log("test: recharge.js - rc-selling-plans executed.");

       const numeric_price = parseFloat(priceUpdate.replace('$', ''));
        const total_points_earned = numeric_price * 2;
        const points_earned_span = document.querySelector('.points_earned');
        points_earned_span.textContent = total_points_earned;

  }, 50);

  var selectedVariant = document.querySelector('input[type="radio"][name="size"]:checked');
  var hideVariantList = document.querySelector('input[type="radio"][name="size"]:checked').getAttribute('hide-variant').match(/\d+(\.\d+)?\s*oz/g);

  
  setTimeout(function() {
  if(document.querySelector('.product-form-container [name="id"]').value === '36070282690712' && document.querySelector('.trynow-container').hasAttribute("active")){
    
    document.querySelector('.trynow-container').style.display = 'block';
    removeSellingPlan();
    sellingPlan_tryNow = document.querySelector('.product-form-container [name="selling_plan"]').value;
      
      addSellingPlan(sellingPlan_tryNow);
  }else{
    document.querySelector('.trynow-container').style.display = 'none';
    
    if(trynowSelected.checked){
    
    trynowSelected.checked = false;
    recharge_oneTime1 = document.querySelector("#rc-radio1");
    recharge_oneTime1.checked = true;
    document.querySelector('.product-form-container [name="selling_plan"]').value = '';
    document.querySelector('input[name="properties[_rechargeOrder]').setAttribute("value", "false");
    document.querySelector('input[name="properties[_tryNow]"]').setAttribute("value", "false");
    trynow_label = document.querySelector(".trynow_label");
    trynow_label.classList.remove('trynow--active');

  if( document.getElementById('rc-radio1').checked){
    
    document.querySelector('input[name="properties[_tryNow]"]').setAttribute("value", "false");
    recharge_oneTime_label = document.querySelector(".onetime-radio");
    recharge_oneTime_label.classList.add('rc-radio--active');
    trynow_label = document.querySelector(".trynow_label");
    trynow_label.classList.remove('trynow--active');
    recharge_subscription_label = document.querySelector(".subscription-radio");
    recharge_subscription_label.classList.remove('rc-radio--active');
    recharge_selling_plans =document.querySelector(".rc-selling-plans");
    recharge_selling_plans.style.display='none';
  }
  if( document.getElementById('rc-radio2').checked ){
    
    document.querySelector('input[name="properties[_tryNow]"]').setAttribute("value", "false");

  }
  
  }
 
  }}, 50);
 
  if( document.getElementById('rc-radio1').checked){
    
    recharge_oneTime_label = document.querySelector(".onetime-radio");
    recharge_oneTime_label.classList.add('rc-radio--active');
    document.querySelector('input[name="properties[_tryNow]"]').setAttribute("value", "false");
    recharge_subscription_label = document.querySelector(".subscription-radio");
    recharge_subscription_label.classList.remove('rc-radio--active');
  }
  if( document.getElementById('rc-radio2').checked ){
    
    recharge_subscription_label = document.querySelector(".subscription-radio");
    recharge_subscription_label.classList.add('rc-radio--active');
    document.querySelector('input[name="properties[_tryNow]"]').setAttribute("value", "false");
    recharge_oneTime_label = document.querySelector(".onetime-radio");
    recharge_oneTime_label.classList.remove('rc-radio--active');
    removeSellingPlan();
    sellingPlan_subscription = document.querySelector('.product-form-container [name="selling_plan"]').value;
    addSellingPlan(sellingPlan_subscription);
  }

// Hide ReCharge Variants
  if (hideVariantList.includes(selectedVariant.getAttribute('value').trim())) {
    hideRechargeVariant();
    setTimeout(function() {
      removeSellingPlan();
    }, 2000); // 5000 milliseconds = 5 seconds
  }
// Display ReCharge Variants
    if( !hideVariantList.includes(selectedVariant.getAttribute('value').trim())){
      displayRechargeVariant();
      } else {
      document.querySelector('.product-form .product-form__submit span').textContent = 'Add to cart';
      document.querySelector('input[name="properties[_rechargeOrder]"]').setAttribute("value", "false");
      document.querySelector('input[name="properties[_disableRechargeVariant]').setAttribute("value", "true");
  }
  if( !hideVariantList.includes(selectedVariant.getAttribute('value').trim())){
      document.querySelector(".rc-widget").style.display="block";
    }

  
}));

// TryNow ID
const sellingPlanId = document.querySelector("meta[name='trynow:selling_plan_id']").getAttribute("content");
document.querySelector('#selling-plan_trynow').setAttribute("data-selling-plan", sellingPlanId);
  


 

      

      document.addEventListener('DOMContentLoaded', function() {
        function isIE() {
          const ua = window.navigator.userAgent;
          const msie = ua.indexOf('MSIE ');
          const trident = ua.indexOf('Trident/');

          return (msie > 0 || trident > 0);
        }

        if (!isIE()) return;
        const hiddenInput = document.querySelector('#{{ product_form_id }} input[name="id"]');
        const noScriptInputWrapper = document.createElement('div');
        const variantSwitcher = document.querySelector('variant-radios[data-section="{{ section.id }}"]') || document.querySelector('variant-selects[data-section="{{ section.id }}"]');
        noScriptInputWrapper.innerHTML = document.querySelector('.product-form__noscript-wrapper-{{ section.id }}').textContent;
        variantSwitcher.outerHTML = noScriptInputWrapper.outerHTML;

        document.querySelector('#Variants-{{ section.id }}').addEventListener('change', function(event) {
          hiddenInput.value = event.currentTarget.value;
        });
      });



      // MOVE ELEMENT DEPENDING ON SCREEN WIDTH
      var $windowWidth = document.documentElement.clientWidth;
      if($windowWidth <= 750){

      /*
        function movePosition(){
          // set element variables
          var $introSection = document.getElementById("product-mobileAtc");
          var $image = document.getElementById("ProductInfo-{{ section.id }}");
          var $imageHold = document.getElementById("product-desktopAtc");

          var elementTarget = document.getElementById("product-desktopAtc");
          if (window.scrollY > (elementTarget.offsetTop + elementTarget.offsetHeight) + 100) {
              //document.getElementById('product-desktopAtc').style.height=elementTarget.offsetHeight+'px';
              $introSection.insertBefore($image, $introSection.childNodes[2]);
          } else {
            document.getElementById('product-desktopAtc').style.height='auto';
            $imageHold.appendChild($image);
          }
        }
        */

        function movePosition(){
          // set element variables
          var mobileStickyBar = document.getElementById("product-mobileAtc");
          var prodDescrCont = document.querySelector('.product__description');
          var prodSection = document.getElementById("ProductInfo-{{ section.id }}");

          var quantitySel = document.querySelector('div.product-form__input.product-form__quantity')
          var atcButton = document.querySelector('div.product-form-container')


          var elementTarget = document.getElementById("product-desktopAtc");
          if (window.scrollY > (elementTarget.offsetTop + elementTarget.offsetHeight) + 100) {
            mobileStickyBar.appendChild(quantitySel)
            mobileStickyBar.appendChild(atcButton)

          } else {
            mobileStickyBar.style.height='auto';
            prodSection.insertBefore(quantitySel,prodDescrCont);
            prodSection.insertBefore(atcButton,prodDescrCont);
          }
          appendDivAfter();
        }



        // check document is ready
        var domReady = function(callback) {
          document.readyState === "interactive" || document.readyState === "complete" ? callback() : document.addEventListener("DOMContentLoaded", callback);
        };

        domReady(function() {
          movePosition();
        });

        window.addEventListener("scroll", function() {
          movePosition();
        });
      }
      // Change usage on variant change
      document.addEventListener('DOMContentLoaded', function() {
        if (document.querySelector('.product--usage') !== null) {
        document.querySelectorAll('variant-radios label').forEach(item => {
          item.addEventListener('click', event => {
            var current_id = document.querySelector('product-form input[name="id"]').value;
            document.querySelector('.product--usage.active').classList.remove('active');
            document.querySelector('.product--usage[data-variantid="' + current_id + '"]').classList.add('active');
          });
        });
        }
      });

     //Smooth scroll of product reviews
      /*
      document.addEventListener('DOMContentLoaded', function() {
        const revwidget = document.getElementById('ReviewsWidget');
        document.querySelectorAll('.ruk_rating_snippet i').forEach(rev => {
          rev.addEventListener('click', function (e) {
            e.preventDefault();
              revwidget.scrollIntoView({
                  behavior: 'smooth',
                  block: 'start'
              });
          });
        });
      });
      */


    </script>

    {%- liquid
      if product.selected_or_first_available_variant.featured_media
        assign seo_media = product.selected_or_first_available_variant.featured_media
      else
        assign seo_media = product.featured_media
      endif
    -%}

    <script type="application/ld+json">
      {
        "@context": "http://schema.org/",
        "@type": "Product",
        "name": {{ product.title | json }},
        "url": {{ request.origin | append: product.url | json }},
        {% if seo_media -%}
          "image": [
            {{ seo_media | image_url: width: seo_media.preview_image.width | prepend: "https:" | json }}
          ],
        {%- endif %}
        "description": {{ product.description | strip_html | json }},
        {% if product.selected_or_first_available_variant.sku != blank -%}
          "sku": {{ product.selected_or_first_available_variant.sku | json }},
        {%- endif %}
        "brand": {
          "@type": "Brand",
          "name": {{ product.vendor | json }}
        },
        "offers": [
          {%- for variant in product.variants -%}
            {
              "@type" : "Offer",
              {%- if variant.sku != blank -%}
                "sku": {{ variant.sku | json }},
              {%- endif -%}
              {%- if variant.barcode.size == 12 -%}
                "gtin12": {{ variant.barcode }},
              {%- endif -%}
              {%- if variant.barcode.size == 13 -%}
                "gtin13": {{ variant.barcode }},
              {%- endif -%}
              {%- if variant.barcode.size == 14 -%}
                "gtin14": {{ variant.barcode }},
              {%- endif -%}
              "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
              "price" : {{ variant.price | divided_by: 100.00 | json }},
              "priceCurrency" : {{ cart.currency.iso_code | json }},
              "url" : {{ request.origin | append: variant.url | json }}
            }{% unless forloop.last %},{% endunless %}
          {%- endfor -%}
        ]
      }
    </script>
          
  <script> 
    //Podsight ATC Event
function pdstATC(){
  var psdtPdpVariantPrice = document.querySelector(".price-item").textContent.replace('$','');
  var psdtPdpQuantity = document.querySelector(".quantity__input").value;
  pdst('addtocart', {
  value: psdtPdpVariantPrice, // price
  currency: 'USD',
  // optional product information for advanced analytics.
  quantity: psdtPdpQuantity,
  product_id: '{{product.id}}',
  product_name: '{{ product.title }}',
  product_vendor: '{{ product.vendor }}',
  variant_id: '{{- product.selected_or_first_available_variant.id -}}',
  variant_name: '{{- product.selected_or_first_available_variant.title -}}',
  product_type: '{{ product.type }}',
    });
  };
  </script>


          
  </section>
{% schema %}
{
  "name": "t:sections.main-product.name",
  "tag": "section",
  "class": "section",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "text",
      "name": "t:sections.main-product.blocks.text.name",
      "settings": [
        {
          "type": "text",
          "id": "addUniqueID",
          "label": "Add Unique Identifier"
          
        },
        {
          "type": "checkbox",
          "id": "data-intellimize-id-textbox",
          "default": false,
          "label": "Enable Intellimize ID"
        },
        {
          "type": "checkbox",
          "id": "h4heading",
          "default": false,
          "label": "Switch to h4 heading"
        },
        {
          "type": "text",
          "id": "text",
          "default": "Text block",
          "label": "t:sections.main-product.blocks.text.settings.text.label"
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            {
              "value": "body",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__1.label"
            },
            {
              "value": "subtitle",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__2.label"
            },
            {
              "value": "uppercase",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__3.label"
            }
          ],
          "default": "body",
          "label": "t:sections.main-product.blocks.text.settings.text_style.label"
        }
      ]
    },
    {
      "type": "richtext",
      "name": "t:sections.main-product.blocks.richtext.name",
      "settings": [
        {
          "type": "text",
          "id": "addUniqueID",
          "label": "Add Unique Identifier"
          
        },
        {
          "type": "richtext",
          "id": "richtext",
          "label": "t:sections.main-product.blocks.richtext.settings.richtext.label"
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            {
              "value": "body",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__1.label"
            },
            {
              "value": "subtitle",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__2.label"
            },
            {
              "value": "uppercase",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__3.label"
            }
          ],
          "default": "body",
          "label": "t:sections.main-product.blocks.text.settings.text_style.label"
        }
      ]
    },
    {
      "type": "title",
      "name": "t:sections.main-product.blocks.title.name",
      "limit": 1
    },
    {
      "type": "price",
      "name": "t:sections.main-product.blocks.price.name",
      "limit": 1
    },
    {
      "type": "quantity_selector",
      "name": "t:sections.main-product.blocks.quantity_selector.name",
      "limit": 1
    },
    {
      "type": "variant_picker",
      "name": "t:sections.main-product.blocks.variant_picker.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "options": [
            {
              "value": "dropdown",
              "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.options__1.label"
            },
            {
              "value": "button",
              "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.options__2.label"
            }
          ],
          "default": "button",
          "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.label"
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "t:sections.main-product.blocks.buy_buttons.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_dynamic_checkout.label",
          "info": "t:sections.main-product.blocks.buy_buttons.settings.show_dynamic_checkout.info"
        },
        {
          "type": "header",
          "content": "Guarantee Text"
        },
        {
          "type": "text",
          "id": "guarantee_text",
          "label": "t:sections.main-product.blocks.buy_buttons.settings.guarantee_text.label"
        },
        {
          "type": "url",
          "id": "guarantee_link",
          "label": "t:sections.main-product.blocks.buy_buttons.settings.guarantee_link.label"
        }
      ]
    },
    {
      "type": "description",
      "name": "t:sections.main-product.blocks.description.name",
      "limit": 1
    },
    {
      "type": "share",
      "name": "t:sections.main-product.blocks.share.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "t:sections.main-product.blocks.share.settings.text.label",
          "default": "Share"
        },
        {
          "type": "paragraph",
          "content": "t:sections.main-product.blocks.share.settings.featured_image_info.content"
        },
        {
          "type": "paragraph",
          "content": "t:sections.main-product.blocks.share.settings.title_info.content"
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "t:sections.main-product.blocks.custom_liquid.name",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "t:sections.main-product.blocks.custom_liquid.settings.custom_liquid.label",
          "info": "t:sections.main-product.blocks.custom_liquid.settings.custom_liquid.info"
        }
      ]
    },
    {
      "type": "collapsible_tab",
      "name": "t:sections.main-product.blocks.collapsible_tab.name",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Collapsible row",
          "info": "t:sections.main-product.blocks.collapsible_tab.settings.heading.info",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.heading.label"
        },
        {
          "type": "select",
          "id": "icon",
          "options": [
            {
              "value": "none",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__1.label"
            },
            {
              "value": "apple",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__2.label"
            },
            {
              "value": "banana",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__3.label"
            },
            {
              "value": "bottle",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__4.label"
            },
            {
              "value": "box",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__5.label"
            },
            {
              "value": "carrot",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__6.label"
            },
            {
              "value": "chat_bubble",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__7.label"
            },
            {
              "value": "check_mark",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__8.label"
            },
            {
              "value": "clipboard",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__9.label"
            },
            {
              "value": "dairy",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__10.label"
            },
            {
              "value": "dairy_free",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__11.label"
            },
            {
              "value": "dryer",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__12.label"
            },
            {
              "value": "eye",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__13.label"
            },
            {
              "value": "fire",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__14.label"
            },
            {
              "value": "gluten_free",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__15.label"
            },
            {
              "value": "heart",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__16.label"
            },
            {
              "value": "iron",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__17.label"
            },
            {
              "value": "leaf",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__18.label"
            },
            {
              "value": "leather",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__19.label"
            },
            {
              "value": "lightning_bolt",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__20.label"
            },
            {
              "value": "lipstick",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__21.label"
            },
            {
              "value": "lock",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__22.label"
            },
            {
              "value": "map_pin",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__23.label"
            },
            {
              "value": "nut_free",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__24.label"
            },
            {
              "value": "pants",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__25.label"
            },
            {
              "value": "paw_print",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__26.label"
            },
            {
              "value": "pepper",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__27.label"
            },
            {
              "value": "perfume",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__28.label"
            },
            {
              "value": "plane",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__29.label"
            },
            {
              "value": "plant",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__30.label"
            },
            {
              "value": "price_tag",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__31.label"
            },
            {
              "value": "question_mark",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__32.label"
            },
            {
              "value": "recycle",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__33.label"
            },
            {
              "value": "return",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__34.label"
            },
            {
              "value": "ruler",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__35.label"
            },
            {
              "value": "serving_dish",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__36.label"
            },
            {
              "value": "shirt",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__37.label"
            },
            {
              "value": "shoe",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__38.label"
            },
            {
              "value": "silhouette",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__39.label"
            },
            {
              "value": "snowflake",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__40.label"
            },
            {
              "value": "star",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__41.label"
            },
            {
              "value": "stopwatch",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__42.label"
            },
            {
              "value": "truck",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__43.label"
            },
            {
              "value": "washing",
              "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.options__44.label"
            }
          ],
          "default": "check_mark",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.icon.label"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.content.label"
        },
        {
          "type": "page",
          "id": "page",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.page.label"
        }
      ]
    },
    {
      "type": "popup",
      "name": "t:sections.main-product.blocks.popup.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Pop-up link text",
          "label": "t:sections.main-product.blocks.popup.settings.link_label.label"
        },
        {
          "id": "page",
          "type": "page",
          "label": "t:sections.main-product.blocks.popup.settings.page.label"
        }
      ]
    },
    {
      "type": "rating",
      "name": "t:sections.main-product.blocks.rating.name",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "t:sections.main-product.blocks.rating.settings.paragraph.content"
        }
      ]
      },
    {
      "type": "usage",
      "name": "t:sections.main-product.blocks.usage.name",
      "limit": 1,
      "settings": [
      ]
    },
    {
      "type": "skin_type",
      "name": "t:sections.main-product.blocks.skin_type.name",
      "limit": 1,
    "settings": [
      ]
    },
    {
    "type": "complementary_products",
    "name": "Frequently bought with",
    "settings": [
      {
      "type": "text",
      "id":"complementary_heading_id",
      "label": "Heading"
      },
      {
        "type":"range",
        "id":"item_count",
        "min": 1,
        "max": 10,
        "step": 1,
        "default": 3,
        "label": "Adjust product count"
      }
    ]
    }
  ],
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_sticky_info",
      "default": true,
      "label": "t:sections.main-product.settings.enable_sticky_info.label"
    },
    {
      "type": "header",
      "content": "t:sections.main-product.settings.event_message.header"
    },
    {
      "type": "checkbox",
      "id": "show_event_message",
      "default": false,
      "label": "t:sections.main-product.settings.event_message.checkbox_label"
    },
    {
      "type": "text",
      "id": "event_message",
      "label": "t:sections.main-product.settings.event_message.label"
    },
    {
      "type": "header",
      "content": "t:sections.main-product.settings.header.content",
      "info": "t:sections.main-product.settings.header.info"
    },
    {
      "type": "select",
      "id": "gallery_layout",
      "options": [
        {
          "value": "stacked",
          "label": "t:sections.main-product.settings.gallery_layout.options__1.label"
        },
        {
          "value": "thumbnail",
          "label": "t:sections.main-product.settings.gallery_layout.options__2.label"
        },
        {
          "value": "thumbnail_slider",
          "label": "t:sections.main-product.settings.gallery_layout.options__3.label"
        }
      ],
      "default": "stacked",
      "label": "t:sections.main-product.settings.gallery_layout.label"
    },
    {
      "type": "select",
      "id": "media_size",
      "options": [
        {
          "value": "small",
          "label": "t:sections.main-product.settings.media_size.options__1.label"
        },
        {
          "value": "medium",
          "label": "t:sections.main-product.settings.media_size.options__2.label"
        },
        {
          "value": "large",
          "label": "t:sections.main-product.settings.media_size.options__3.label"
        }
      ],
      "default": "large",
      "label": "t:sections.main-product.settings.media_size.label",
      "info": "t:sections.main-product.settings.media_size.info"
    },
    {
      "type": "select",
      "id": "mobile_thumbnails",
      "options": [
        {
          "value": "show",
          "label": "t:sections.main-product.settings.mobile_thumbnails.options__1.label"
        },
        {
          "value": "hide",
          "label": "t:sections.main-product.settings.mobile_thumbnails.options__2.label"
        }
      ],
      "default": "hide",
      "label": "t:sections.main-product.settings.mobile_thumbnails.label"
    },
    {
      "type": "checkbox",
      "id": "hide_variants",
      "default": false,
      "label": "t:sections.main-product.settings.hide_variants.label"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "default": false,
      "label": "t:sections.main-product.settings.enable_video_looping.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ]
}
{% endschema %}
